!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="dist/",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(0);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentPageNumb=0,this.requestValue=t,this.pageToken="",this.items=[],this.size=null,this.restOfClips=null,this.width=null,this.leftScroll=0,this.itemWidth=280,this.itemMarginRight=30,document.body.onresize=function(){i.setSize(document.body.offsetWidth),i.handleUsersActivity()},this.createItemsBoxDom(),this.createItemsWrapperDom(),this.createPaginator()}var t,i,s;return t=e,(i=[{key:"createInterface",value:function(e){this.addItems(e),this.setSize(document.body.offsetWidth),this.setMouseSwipe(),this.setMobileSwipe(),this.handleUsersActivity()}},{key:"createItemsBoxDom",value:function(){this.itemsBoxDom=document.createElement("div"),this.itemsBoxDom.id="itemsBoxDom"}},{key:"createItemsWrapperDom",value:function(){this.itemsWrapperDom=document.createElement("div"),this.itemsWrapperDom.id="itemsWrapperDom",this.itemsBoxDom.appendChild(this.itemsWrapperDom)}},{key:"createPaginator",value:function(){this.paginator=document.createElement("div"),this.paginator.id="paginator",this.itemsBoxDom.appendChild(this.paginator)}},{key:"addItems",value:function(e){var t=this;e.forEach(function(e){t.items.push(e);var i=function(e){var t=document.createElement("div");t.classList.add("itemDom");var i=document.createElement("a");i.href="https://youtube.com/watch?v=".concat(e.id),i.innerHTML=e.title,i.target="_blank",i.classList.add("itemTitle"),t.appendChild(i);var n=document.createElement("img");n.src=e.imageUrl,n.classList.add("itemImage"),t.appendChild(n);var s=document.createElement("div");s.classList.add("itemDate"),s.innerHTML=e.date,t.appendChild(s);var o=document.createElement("div");o.classList.add("itemChannel"),o.innerHTML="Канал: "+e.channelTitle,t.appendChild(o);var a=document.createElement("div");a.innerHTML=e.description.slice(0,160),a.classList.add("itemDescription"),t.appendChild(a);var r=document.createElement("div");r.classList.add("itemViewCount");var c=new Intl.NumberFormat("ru");r.innerHTML=c.format(e.viewCount),t.appendChild(r);var l=document.createElement("a");return l.classList.add("itemButton"),l.innerHTML="Перейти",l.href="https://youtube.com/watch?v=".concat(e.id),l.target="_blank",t.appendChild(l),t}(e);t.itemsWrapperDom.appendChild(i)})}},{key:"stopSwiping",value:function(){this.itemsWrapperDom.onmousedown=null,this.itemsWrapperDom.ontouchstart=null,document.body.onresize=null}},{key:"startSwiping",value:function(){var e=this;this.setMouseSwipe(),this.setMobileSwipe(),document.body.onresize=function(){e.setSize(document.body.offsetWidth),e.handleUsersActivity()}}},{key:"setSize",value:function(e){this.size=Math.min(4,Math.floor(e/(this.itemWidth+this.itemMarginRight))),this.width=this.size*(this.itemWidth+this.itemMarginRight)-this.itemMarginRight,this.itemsBoxDom.style.width="".concat(this.width,"px")}},{key:"handleUsersActivity",value:function(){var e=this;this.leftScroll=Math.ceil(this.leftScroll/this.size)*this.size,this.itemsWrapperDom.style.left="".concat(this.leftScroll*(this.itemWidth+this.itemMarginRight),"px"),this.currentPageNumb=Math.floor(-this.leftScroll/this.size),this.paginator.innerHTML="";for(var t=Math.floor(this.items.length/this.size),i=0;i<t;i++){var n=document.createElement("span");n.classList.add("pageCircle"),n.innerHTML=i+1,this.paginator.appendChild(n),i!==this.currentPageNumb&&(n.onclick=function(t){e.leftScroll=-(t.target.innerHTML-1)*e.size,e.itemsWrapperDom.style.left="".concat(e.leftScroll*(e.itemWidth+e.itemMarginRight),"px"),e.handleUsersActivity()}),i===this.currentPageNumb&&(n.style.color="red"),Math.abs(this.currentPageNumb-i)>2*this.size&&(n.style.display="none"),0===i&&(n.style.display="inline-block",Math.abs(this.currentPageNumb-i)>2*this.size+1&&n.classList.add("firstPage")),i===t-1&&(n.style.display="inline-block",Math.abs(this.currentPageNumb-i)>2*this.size+1&&n.classList.add("lastPage"))}this.restOfClips=this.items.length-this.size+this.leftScroll,this.restOfClips<this.size&&this.makeRequest()}},{key:"setMouseSwipe",value:function(){var e=this,t=this.itemsWrapperDom,i=0;t.ondragstart=function(){return!1},t.onmousedown=function(n){var s=e.leftScroll,o=n.pageX;t.onmousemove=function(n){i=n.pageX-o;var a=function(){i=e.size*Math.sign(i)*(Math.abs(i)>20?1:0),e.leftScroll=Math.min(0,s+i),new Promise(function(t){e.handleUsersActivity(),t()}).then(function(){t.style.left="".concat(e.leftScroll*(e.itemWidth+e.itemMarginRight),"px")}),t.onmousemove=null,t.onmouseleave=null,window.onmouseup=null};t.onmouseleave=a,window.onmouseup=a},t.onmouseup=function(){t.onmousemove=null}}}},{key:"setMobileSwipe",value:function(){var e=this,t=this.itemsWrapperDom;t.ontouchstart=function(i){var n=e.leftScroll,s=i.touches[0].pageX;t.ontouchmove=function(i){var o=i.touches[0].pageX-s;t.ontouchend=function(){o=Math.abs(o)>10?e.size*Math.sign(o):0,e.leftScroll=Math.min(0,n+o),t.ontouchend=null,t.ontouchmove=null,new Promise(function(t){e.handleUsersActivity(),t()}).then(function(){t.style.left="".concat(e.leftScroll*(e.itemWidth+e.itemMarginRight),"px")})}}}}},{key:"makeRequest",value:function(){var e,t,i,n,s=this;this.stopSwiping(),(e=this.requestValue,t=this.pageToken,i={},n=function(e,t,i,n){return"https://www.googleapis.com/youtube/v3/".concat(t,"?key=AIzaSyCTWC75i70moJLzyNh3tt4jzCljZcRkU8Y&type=video&part=").concat(e,"&maxResults=8&q=").concat(i,"&pageToken=").concat(n)}("snippet","search",e,t),fetch(n).then(function(e){return e.json()}).then(function(e){i.pageToken=e.nextPageToken,i.itemsArr=e.items.map(function(e){return{title:e.snippet.title,date:new Date(Date.parse(e.snippet.publishedAt)).toDateString(),description:e.snippet.description,channelId:e.snippet.channelId,channelTitle:e.snippet.channelTitle,id:e.id.videoId,imageUrl:e.snippet.thumbnails.medium.url}});var t=function(e,t){return"https://www.googleapis.com/youtube/v3/videos?key=AIzaSyCTWC75i70moJLzyNh3tt4jzCljZcRkU8Y&id=".concat(e,"&part=").concat(t)}(i.itemsArr.reduce(function(e,t,i){return e+=(0===i?"":",")+t.id},""),"snippet,statistics");return fetch(t)}).then(function(e){return e.json()}).then(function(e){var t=e.items;return i.itemsArr.forEach(function(e,i){e.viewCount=t[i].statistics.viewCount}),i})).then(function(e){s.pageToken=e.pageToken,0===s.items.length?s.createInterface(e.itemsArr):s.items.length>0&&s.addItems(e.itemsArr),s.startSwiping(),s.handleUsersActivity()})}}])&&n(t.prototype,i),s&&n(t,s),e}();!function(){var e=document.createElement("div");e.id="searchBox";var t=document.createElement("input");t.id="searchField",e.appendChild(t);var i=document.createElement("input");i.type="button",i.value="=>",i.id="searchButton",e.appendChild(i),document.body.appendChild(e),t.onfocus=function(){t.style.background="white"},t.onblur=function(){t.style.background="lightgray"}}();var o=document.getElementById("searchField"),a=document.getElementById("searchButton"),r=document.createElement("div");document.body.appendChild(r),a.onclick=function(){r.innerHTML="";var e=new s(o.value);r.appendChild(e.itemsBoxDom),e.makeRequest()}}]);